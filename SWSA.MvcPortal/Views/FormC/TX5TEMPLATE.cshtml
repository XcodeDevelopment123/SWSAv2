@{
    ViewData["Title"] = "TX5TEMPLATE";
}

<h1>TX5 CP204/CP204A TEMPLATE</h1>

<div class="row">
    <div class="col-md-12">
        <!-- /.card -->
        <div class="card">

            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-tasks me-2"></i>
                </h3>
                <div class="card-tools">
                    <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#taskModal">
                        <i class="fas fa-plus me-2"></i>New Task
                    </button>
                </div>
            </div>
            <!-- /.card-header -->
            <div class="card-body" style="overflow:auto">
                <table id="taskDatatable" class="table table-bordered table-striped table-responsive">
                    <thead>
                        <tr>
                            <th colspan="4">Company Information</th>
                            <th rowspan="3">Person In Charge</th>
                            <th rowspan="3">Past Year Tax estimate (ETP)</th>
                            <th colspan="5">CP 204</th>
                            <th colspan="15">CP 204A</th>
                        </tr>

                        <tr>
                            <th rowspan="2">Company Name</th>
                            <th rowspan="2">Tax Reference No.</th>
                            <th rowspan="2">Year End(YE)</th>
                            <th rowspan="2">Company Type</th>

                            <th colspan="5">Initial Estimation</th>
                            <th colspan="5">1st Revision</th>
                            <th colspan="5">2nd Revision</th>
                        </tr>

                        <tr>
                            <th>1 month before Year end (YE)</th>
                            <th>Reminder Date</th>
                            <th>Client Respone</th>
                            <th>Current ETP</th>
                            <th>Date Submit to IRB</th>

                            <th>6th month after YE</th>
                            <th>Reminder date</th>
                            <th>Client respone</th>
                            <th>Revised ETP</th>
                            <th>Date Submit to IRB</th>

                            <th>9th month after YE</th>
                            <th>Reminder date</th>
                            <th>Client respone</th>
                            <th>Revised ETP</th>
                            <th>Date Submit to IRB</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>TECH SOLUTIONS SDN BHD</td>
                            <td>1234567-X</td>
                            <td>31/12/2024</td>
                            <td>Sdn Bhd</td>
                            <td>John Doe</td>
                            <td>150,000.00</td>
                            <td>30/11/2024</td>
                            <td>15/11/2024</td>
                            <td>Confirmed</td>
                            <td>160,000.00</td>
                            <td>25/11/2024</td>
                            <td>30/06/2025</td>
                            <td>15/06/2025</td>
                            <td>Pending</td>
                            <td>155,000.00</td>
                            <td>28/06/2025</td>
                            <td>30/09/2025</td>
                            <td>15/09/2025</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>GLOBAL TRADING SDN BHD</td>
                            <td>7654321-Y</td>
                            <td>31/03/2024</td>
                            <td>Sdn Bhd</td>
                            <td>Jane Smith</td>
                            <td>85,000.00</td>
                            <td>28/02/2024</td>
                            <td>15/02/2024</td>
                            <td>Confirmed</td>
                            <td>90,000.00</td>
                            <td>25/02/2024</td>
                            <td>30/09/2024</td>
                            <td>15/09/2024</td>
                            <td>Confirmed</td>
                            <td>88,000.00</td>
                            <td>28/09/2024</td>
                            <td>31/12/2024</td>
                            <td>15/12/2024</td>
                            <td>Confirmed</td>
                            <td>87,500.00</td>
                            <td>28/12/2024</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- /.card-body -->
        </div>
        <!-- /.card -->
    </div>
</div>

<!-- 模态框部分 -->
<div class="modal fade" id="taskModal" tabindex="-1" aria-labelledby="taskModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="taskModalLabel">
                    <i class="fas fa-edit me-2"></i>
                    <span id="modalTitle">Add New CP204/CP204A Record</span>
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="taskForm">
                    <input type="hidden" id="editIndex" value="">

                    <!-- Company Information -->
                    <div class="form-info-label col-12">
                        <label>Company Information</label>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="companyName">Company Name (Suppose Link From Client List)</label>
                                <input type="text" id="companyName" name="companyName" class="form-control" placeholder="Enter company name" />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="taxReferenceNo">Tax Reference No.</label>
                                <input type="text" id="taxReferenceNo" name="taxReferenceNo" class="form-control" placeholder="Enter tax reference number" />
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="yearEnd">Year End (YE)</label>
                                <input type="text" id="yearEnd" name="yearEnd" class="form-control" placeholder="Select date" />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="companyType">Company Type</label>
                                <select id="companyType" name="companyType" class="form-control">
                                    <option value="">Select Type</option>
                                    <option value="Sdn Bhd">Sdn Bhd</option>
                                    <option value="Bhd">Bhd</option>
                                    <option value="LLP">LLP</option>
                                    <option value="Enterprise">Enterprise</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Person In Charge & Past Year Tax -->
                    <div class="form-info-label col-12">
                        <label>Person In Charge & Past Year Tax</label>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="personInCharge">Person In Charge</label>
                                <input type="text" id="personInCharge" name="personInCharge" class="form-control" placeholder="Enter PIC name" />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="pastYearTaxEstimate">Past Year Tax estimate (ETP)</label>
                                <input type="text" id="pastYearTaxEstimate" name="pastYearTaxEstimate" class="form-control" placeholder="Enter amount" />
                            </div>
                        </div>
                    </div>

                    <!-- CP 204 - Initial Estimation -->
                    <div class="form-info-label col-12">
                        <label>CP 204 - Initial Estimation</label>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="cp204OneMonthBeforeYE">1 month before Year end (YE)</label>
                                <input type="text" id="cp204OneMonthBeforeYE" name="cp204OneMonthBeforeYE" class="form-control" placeholder="Select date" />
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="cp204ReminderDate">Reminder Date</label>
                                <input type="text" id="cp204ReminderDate" name="cp204ReminderDate" class="form-control" placeholder="Select date" />
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="cp204ClientResponse">Client Respone</label>
                                <select id="cp204ClientResponse" name="cp204ClientResponse" class="form-control">
                                    <option value="">Select Response</option>
                                    <option value="Confirmed">Confirmed</option>
                                    <option value="Pending">Pending</option>
                                    <option value="Revised">Revised</option>
                                    <option value="Not Responded">Not Responded</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="cp204CurrentETP">Current ETP</label>
                                <input type="text" id="cp204CurrentETP" name="cp204CurrentETP" class="form-control" placeholder="Enter amount" />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="cp204DateSubmitIRB">Date Submit to IRB</label>
                                <input type="text" id="cp204DateSubmitIRB" name="cp204DateSubmitIRB" class="form-control" placeholder="Select date" />
                            </div>
                        </div>
                    </div>

                    <!-- CP 204A - 1st Revision -->
                    <div class="form-info-label col-12">
                        <label>CP 204A - 1st Revision</label>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="cp204a6thMonthAfterYE">6th month after YE</label>
                                <input type="text" id="cp204a6thMonthAfterYE" name="cp204a6thMonthAfterYE" class="form-control" placeholder="Select date" />
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="cp204a1stReminderDate">Reminder date</label>
                                <input type="text" id="cp204a1stReminderDate" name="cp204a1stReminderDate" class="form-control" placeholder="Select date" />
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="cp204a1stClientResponse">Client respone</label>
                                <select id="cp204a1stClientResponse" name="cp204a1stClientResponse" class="form-control">
                                    <option value="">Select Response</option>
                                    <option value="Confirmed">Confirmed</option>
                                    <option value="Pending">Pending</option>
                                    <option value="Revised">Revised</option>
                                    <option value="Not Responded">Not Responded</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="cp204a1stRevisedETP">Revised ETP</label>
                                <input type="text" id="cp204a1stRevisedETP" name="cp204a1stRevisedETP" class="form-control" placeholder="Enter amount" />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="cp204a1stDateSubmitIRB">Date Submit to IRB</label>
                                <input type="text" id="cp204a1stDateSubmitIRB" name="cp204a1stDateSubmitIRB" class="form-control" placeholder="Select date" />
                            </div>
                        </div>
                    </div>

                    <!-- CP 204A - 2nd Revision -->
                    <div class="form-info-label col-12">
                        <label>CP 204A - 2nd Revision</label>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="cp204a9thMonthAfterYE">9th month after YE</label>
                                <input type="text" id="cp204a9thMonthAfterYE" name="cp204a9thMonthAfterYE" class="form-control" placeholder="Select date" />
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="cp204a2ndReminderDate">Reminder date</label>
                                <input type="text" id="cp204a2ndReminderDate" name="cp204a2ndReminderDate" class="form-control" placeholder="Select date" />
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="cp204a2ndClientResponse">Client respone</label>
                                <select id="cp204a2ndClientResponse" name="cp204a2ndClientResponse" class="form-control">
                                    <option value="">Select Response</option>
                                    <option value="Confirmed">Confirmed</option>
                                    <option value="Pending">Pending</option>
                                    <option value="Revised">Revised</option>
                                    <option value="Not Responded">Not Responded</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="cp204a2ndRevisedETP">Revised ETP</label>
                                <input type="text" id="cp204a2ndRevisedETP" name="cp204a2ndRevisedETP" class="form-control" placeholder="Enter amount" />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="cp204a2ndDateSubmitIRB">Date Submit to IRB</label>
                                <input type="text" id="cp204a2ndDateSubmitIRB" name="cp204a2ndDateSubmitIRB" class="form-control" placeholder="Select date" />
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>Cancel
                </button>
                <button type="button" class="btn btn-primary" id="saveBtn">
                    <i class="fas fa-save me-2"></i>Save
                </button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        $(document).ready(function() {
            // 初始化日期选择器
            $('input[type="text"]').filter(function() {
                return $(this).attr('id') && $(this).attr('id').includes('Date') ||
                       $(this).attr('id') && $(this).attr('id').includes('date');
            }).datepicker({
                format: 'dd/mm/yyyy',
                autoclose: true
            });

            // 保存按钮点击事件
            $('#saveBtn').click(function() {
                // 这里添加保存逻辑
                console.log('Save button clicked');
                $('#taskModal').modal('hide');
            });

            // 初始化DataTable
            $('#taskDatatable').DataTable({
                responsive: true
                ordering: true,
                autoWidth: false,
                pageLength: 10,
                language: {
                    search: "Search:",
                    lengthMenu: "Show _MENU_ entries"
                }
            });
        });
    </script>
}